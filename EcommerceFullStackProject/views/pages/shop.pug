extends ../layout

block content
  if product
    // Product Details
    .container(style="display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; margin: 3rem auto; align-items: start;")
      // Product Images
      .product-images
        .product-media(style="width: 100%; height: 500px; margin-bottom: 1rem; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.15); background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%); display: flex; align-items: center; justify-content: center; position: relative;")
          if product.image && product.image.length > 0
            img(src=product.image, alt=product.name, onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\"font-size: 4rem; color: #ddd; text-align: center;\">üì¶<br/><span style=\\\"font-size: 1rem; color: #999;\\\">Image not available</span></div>'", style="width: 100%; height: 100%; object-fit: cover; object-position: center; transition: transform 0.3s ease;")
          else
            span(style="font-size: 4rem; color: #ddd;") üì¶

      // Product Info
      .product-info
        .section-head(style="flex-direction: column; align-items: flex-start; margin-bottom: 1.5rem;")
          h1(style="font-size: 2.5rem; margin: 0; color: #1a1a1a;")= product.name
          span.badge(style="background: linear-gradient(135deg, #ff6b35 0%, #ff5722 100%); color: white; padding: 0.5rem 1.5rem; border-radius: 25px; width: fit-content; margin-top: 0.5rem; font-weight: 600;")= product.category || 'Uncategorized'

        .price(style="font-size: 2.5rem; color: #ff6b35; font-weight: 700; margin: 1.5rem 0;") $#{(product.price || 0).toFixed(2)}

        if product.description
          .card(style="margin: 1.5rem 0; padding: 1.5rem; background: #f9f9f9; border-left: 4px solid #ff6b35; border-radius: 8px;")
            h3(style="margin-top: 0; color: #1a1a1a;") üìã Description
            p(style="margin: 0; color: #555; line-height: 1.8;")= product.description

        .card(style="margin: 1.5rem 0; padding: 1.5rem; background: #f9f9f9; border-radius: 8px;")
          if product.inStock
            p(style="color: #4caf50; font-weight: 700; margin: 0; font-size: 1.1rem;") ‚úÖ In Stock
            if product.stock
              p(style="color: #666; font-weight: 600; margin: 0.5rem 0;") Available: #{product.stock} units
          else
            p(style="color: #f44336; font-weight: 700; margin: 0; font-size: 1.1rem;") ‚ùå Out of Stock

        form.product-form(action="/cart/add" method="POST" style="display: flex; gap: 1rem; flex-direction: column; margin-top: 2rem;")
          input(type="hidden" name="productId" value=product._id)
          
          .form-group(style="display: flex; gap: 1rem; align-items: center;")
            label(for="quantity" style="font-weight: 600; white-space: nowrap;") Quantity:
            input#quantity(type="number" name="quantity" value="1" min="1" style="max-width: 100px; padding: 0.5rem; border: 2px solid #eee; border-radius: 6px; font-size: 1rem;")
          
          button.btn(type="submit" style="width: 100%; padding: 1.2rem; font-size: 1.1rem; background: linear-gradient(135deg, #ff6b35 0%, #ff5722 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;") üõí Add to Cart
          a.btn.btn-outline(href="/shop" style="width: 100%; text-align: center; padding: 1rem; border: 2px solid #ff6b35; color: #ff6b35; border-radius: 8px; text-decoration: none; font-weight: 600; transition: all 0.3s ease;") ‚Üê Back to Shop

  else
    .container
      .card
        .text-center
          p(style="font-size: 3rem; margin-bottom: 1rem;") üîç
          h3 Product Not Found
          p Apologies! The product you're looking for doesn't exist.
          a.btn(href="/shop") üõçÔ∏è Browse Products
