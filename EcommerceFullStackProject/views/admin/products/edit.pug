extends ../layout

block content
  .admin-header
    h1 Edit Product

  .card
    form(method="POST", action=`/admin/products/edit/${product._id}`)
      .form-row.full
        .form-group
          label(for="name") Product Name
          input#name(type="text", name="name", value=product.name, placeholder="Enter product name", required)

      .form-row
        .form-group
          label(for="price") Price ($)
          input#price(type="number", name="price", value=product.price, placeholder="0.00", step="0.01", required)
        .form-group
          label(for="originalPrice") Original Price ($)
          input#originalPrice(type="number", name="originalPrice", value=product.originalPrice || '', placeholder="0.00", step="0.01")

      .form-row
        .form-group
          label(for="stock") Stock Quantity
          input#stock(type="number", name="stock", value=product.stock || 0, placeholder="0")
        .form-group
          label(for="rating") Rating (0-5)
          input#rating(type="number", name="rating", value=product.rating || 0, min="0", max="5", step="0.1")

      .form-row
        .form-group
          label(for="reviewCount") Review Count
          input#reviewCount(type="number", name="reviewCount", value=product.reviewCount || 0, min="0")
        .form-group
          label(for="category") Category
          select#category(name="category", required)
            option(value=product.category)= product.category || 'Select'
            option(value="Electronics") Electronics
            option(value="Clothing") Clothing
            option(value="Accessories") Accessories
            option(value="Shoes") Shoes
            option(value="Other") Other

      .form-row
        .form-group
          label(for="model") Model (optional)
          input#model(type="text", name="model", value=product.model || '', placeholder="WH-1000XM5 / Series 9")
        .form-group
          label(for="sku") SKU (optional)
          input#sku(type="text", name="sku", value=product.sku || '', placeholder="WH-001")

      .form-row
        .form-group
          label(for="image") Image URL
          input#image(type="text", name="image", value=product.image, placeholder="/images/jacket.jpg")
        .form-group
          label(for="colors") Colors (comma separated)
          input#colors(type="text", name="colors", value=(product.colors || []).join(', '), placeholder="#111827, #2563eb, #e5e7eb")

      .form-row.full
        .form-group
          label(for="highlights") Highlights (comma separated)
          textarea#highlights(name="highlights", placeholder="Free shipping, 2 year warranty, Lightweight build", style="min-height: 90px;")= (product.highlights || []).join(', ')

      .form-row.full
        .form-group
          label(for="seoTitle") SEO Title
          input#seoTitle(type="text", name="seoTitle", value=product.seoTitle || '', placeholder="SEO-friendly title for search")

      .form-row.full
        .form-group
          label(for="tags") Tags (comma separated)
          input#tags(type="text", name="tags", value=(product.tags || []).join(', '), placeholder="gift, running, lightweight")

      .form-row.full
        .form-group
          label(for="faqs") FAQs (comma or newline separated)
          textarea#faqs(name="faqs", placeholder="Is it giftable? Yes, it ships ready to gift.", style="min-height: 120px;")= (product.faqs || []).join(', ')

      .form-row.full
        .form-group
          label(for="description") Description
          textarea#description(name="description", placeholder="Enter detailed product description", style="min-height: 150px;")= product.description

      .form-row.full
        .form-group
          label AI Tools
          .ai-tools
            button.btn.btn-outline(type="button" data-ai="description") Generate description
            button.btn.btn-outline(type="button" data-ai="highlights") Generate highlights
            button.btn.btn-outline(type="button" data-ai="seo") Generate SEO title + tags
            button.btn.btn-outline(type="button" data-ai="faqs") Generate product FAQs
            button.btn.btn-outline(type="button" data-ai="autofill") Auto-fill colors & category

      .form-row.full
        .form-group
          label(for="inStock") Product Status
          select#inStock(name="inStock")
            option(value="true", selected=(product.inStock !== false)) In Stock
            option(value="false", selected=(product.inStock === false)) Out of Stock

      .form-row.full(style="gap: 1rem;")
        button.btn(type="submit", style="flex: 1;") Update Product
        a.btn.btn-outline(href="/admin/products", style="flex: 1; text-align: center;") Cancel
